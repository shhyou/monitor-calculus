<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>SpaceEfficient.Properties.NonEmpty</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--without-K</a> <a id="25" class="Pragma">--safe</a> <a id="32" class="Symbol">#-}</a>

<a id="37" class="Keyword">open</a> <a id="42" class="Keyword">import</a> <a id="49" href="Relation.Nullary.html" class="Module">Relation.Nullary</a> <a id="66" class="Keyword">using</a> <a id="72" class="Symbol">(</a><a id="73" href="Relation.Nullary.Decidable.Core.html#1966" class="Record">Dec</a><a id="76" class="Symbol">;</a> <a id="78" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a><a id="81" class="Symbol">;</a> <a id="83" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a><a id="85" class="Symbol">;</a> <a id="87" href="Relation.Nullary.Decidable.Core.html#2010" class="InductiveConstructor Operator">_because_</a><a id="96" class="Symbol">;</a> <a id="98" href="Relation.Nullary.Reflects.html#1148" class="InductiveConstructor">ofʸ</a><a id="101" class="Symbol">;</a> <a id="103" href="Relation.Nullary.Reflects.html#1185" class="InductiveConstructor">ofⁿ</a><a id="106" class="Symbol">)</a>
<a id="108" class="Keyword">open</a> <a id="113" class="Keyword">import</a> <a id="120" href="Data.Unit.Base.html" class="Module">Data.Unit.Base</a> <a id="135" class="Symbol">as</a> <a id="138" class="Module">Unit</a> <a id="143" class="Keyword">using</a> <a id="149" class="Symbol">(</a><a id="150" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a><a id="151" class="Symbol">;</a> <a id="153" href="Agda.Builtin.Unit.html#212" class="InductiveConstructor">tt</a><a id="155" class="Symbol">)</a>

<a id="158" class="Keyword">open</a> <a id="163" class="Keyword">import</a> <a id="170" href="Annotation.Language.html" class="Module">Annotation.Language</a>
<a id="190" class="Keyword">open</a> <a id="195" class="Keyword">import</a> <a id="202" href="SpaceEfficient.Base.html" class="Module">SpaceEfficient.Base</a>
  <a id="224" class="Keyword">using</a> <a id="230" class="Symbol">()</a>
  <a id="235" class="Keyword">renaming</a> <a id="244" class="Symbol">(</a><a id="245" href="SpaceEfficient.Base.html#4263" class="Function">𝒜cctc</a> <a id="251" class="Symbol">to</a> <a id="254" class="Function">SE𝒜cctc</a><a id="261" class="Symbol">)</a>
<a id="263" class="Keyword">open</a> <a id="268" class="Keyword">import</a> <a id="275" href="SpaceEfficient.OrderedPredicate.html" class="Module">SpaceEfficient.OrderedPredicate</a>
  <a id="309" class="Keyword">using</a> <a id="315" class="Symbol">()</a>
  <a id="320" class="Keyword">renaming</a> <a id="329" class="Symbol">(</a><a id="330" href="SpaceEfficient.OrderedPredicate.html#1296" class="Function">Pred</a> <a id="335" class="Symbol">to</a> <a id="338" class="Function">SEPred</a><a id="344" class="Symbol">)</a>

<a id="347" class="Keyword">module</a> <a id="354" href="SpaceEfficient.Properties.NonEmpty.html" class="Module">SpaceEfficient.Properties.NonEmpty</a>
  <a id="391" class="Symbol">(</a><a id="392" href="SpaceEfficient.Properties.NonEmpty.html#392" class="Bound">Label</a> <a id="398" class="Symbol">:</a> <a id="400" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="403" class="Symbol">)</a>
  <a id="407" class="Symbol">{</a><a id="408" href="SpaceEfficient.Properties.NonEmpty.html#408" class="Bound">𝒜</a> <a id="410" class="Symbol">:</a> <a id="412" href="Annotation.Language.html#838" class="Record">AnnTerm</a><a id="419" class="Symbol">}</a>
  <a id="423" class="Symbol">(</a><a id="424" href="SpaceEfficient.Properties.NonEmpty.html#424" class="Bound">𝒜cctc-view</a> <a id="435" class="Symbol">:</a> <a id="437" href="Annotation.Language.html#3630" class="Record">AnnTermView</a> <a id="449" href="SpaceEfficient.Properties.NonEmpty.html#408" class="Bound">𝒜</a> <a id="451" class="Symbol">(</a><a id="452" href="SpaceEfficient.Properties.NonEmpty.html#254" class="Function">SE𝒜cctc</a> <a id="460" href="SpaceEfficient.Properties.NonEmpty.html#392" class="Bound">Label</a> <a id="466" href="SpaceEfficient.Properties.NonEmpty.html#408" class="Bound">𝒜</a><a id="467" class="Symbol">))</a>
  <a id="472" class="Symbol">(</a><a id="473" href="SpaceEfficient.Properties.NonEmpty.html#473" class="Bound">stronger?</a> <a id="483" class="Symbol">:</a> <a id="485" href="SpaceEfficient.Properties.NonEmpty.html#338" class="Function">SEPred</a> <a id="492" href="SpaceEfficient.Properties.NonEmpty.html#392" class="Bound">Label</a> <a id="498" href="SpaceEfficient.Properties.NonEmpty.html#408" class="Bound">𝒜</a> <a id="500" class="Symbol">→</a> <a id="502" href="SpaceEfficient.Properties.NonEmpty.html#338" class="Function">SEPred</a> <a id="509" href="SpaceEfficient.Properties.NonEmpty.html#392" class="Bound">Label</a> <a id="515" href="SpaceEfficient.Properties.NonEmpty.html#408" class="Bound">𝒜</a> <a id="517" class="Symbol">→</a> <a id="519" href="Relation.Nullary.Decidable.Core.html#1966" class="Record">Dec</a> <a id="523" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a><a id="524" class="Symbol">)</a>
  <a id="528" class="Keyword">where</a>

<a id="535" class="Keyword">open</a> <a id="540" class="Keyword">import</a> <a id="547" href="Level.html" class="Module">Level</a> <a id="553" class="Keyword">using</a> <a id="559" class="Symbol">(</a><a id="560" href="Level.html#521" class="Function">0ℓ</a><a id="562" class="Symbol">)</a>

<a id="565" class="Keyword">open</a> <a id="570" class="Keyword">import</a> <a id="577" href="Data.Bool.Base.html" class="Module">Data.Bool.Base</a> <a id="592" class="Keyword">using</a> <a id="598" class="Symbol">(</a><a id="599" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a><a id="603" class="Symbol">;</a> <a id="605" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a><a id="609" class="Symbol">;</a> <a id="611" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a><a id="616" class="Symbol">;</a> <a id="618" href="Data.Bool.Base.html#1515" class="Function Operator">if_then_else_</a><a id="631" class="Symbol">)</a>
<a id="633" class="Keyword">open</a> <a id="638" class="Keyword">import</a> <a id="645" href="Data.Nat.Base.html" class="Module">Data.Nat.Base</a> <a id="659" class="Symbol">as</a> <a id="662" class="Module">Nat</a> <a id="666" class="Keyword">using</a> <a id="672" class="Symbol">(</a><a id="673" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="674" class="Symbol">;</a> <a id="676" href="Agda.Builtin.Nat.html#221" class="InductiveConstructor">zero</a><a id="680" class="Symbol">;</a> <a id="682" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a><a id="685" class="Symbol">;</a> <a id="687" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">_+_</a><a id="690" class="Symbol">;</a> <a id="692" href="Data.Nat.Base.html#1697" class="Datatype Operator">_≤_</a><a id="695" class="Symbol">;</a> <a id="697" href="Data.Nat.Base.html#1720" class="InductiveConstructor">z≤n</a><a id="700" class="Symbol">;</a> <a id="702" href="Data.Nat.Base.html#1762" class="InductiveConstructor">s≤s</a><a id="705" class="Symbol">)</a>
<a id="707" class="Keyword">open</a> <a id="712" class="Keyword">import</a> <a id="719" href="Data.Product.html" class="Module">Data.Product</a> <a id="732" class="Symbol">as</a> <a id="735" class="Module">Product</a>
  <a id="745" class="Keyword">using</a> <a id="751" class="Symbol">(</a><a id="752" href="Agda.Builtin.Sigma.html#165" class="Record">Σ</a><a id="753" class="Symbol">;</a> <a id="755" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">_,_</a><a id="758" class="Symbol">;</a> <a id="760" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="765" class="Symbol">;</a> <a id="767" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="772" class="Symbol">;</a> <a id="774" href="Data.Product.Base.html#1244" class="Function">Σ-syntax</a><a id="782" class="Symbol">;</a> <a id="784" href="Data.Product.Base.html#852" class="Function">∃</a><a id="785" class="Symbol">;</a> <a id="787" href="Data.Product.Base.html#1371" class="Function">∃-syntax</a><a id="795" class="Symbol">;</a> <a id="797" href="Data.Product.Base.html#1618" class="Function Operator">_×_</a><a id="800" class="Symbol">;</a> <a id="802" href="Data.Product.Base.html#1686" class="Function Operator">_,′_</a><a id="806" class="Symbol">)</a>

<a id="809" class="Keyword">open</a> <a id="814" class="Keyword">import</a> <a id="821" href="Data.List.Base.html" class="Module">Data.List.Base</a> <a id="836" class="Symbol">as</a> <a id="839" class="Module">List</a> <a id="844" class="Keyword">using</a> <a id="850" class="Symbol">(</a><a id="851" href="Agda.Builtin.List.html#147" class="Datatype">List</a><a id="855" class="Symbol">;</a> <a id="857" href="Data.List.Base.html#7301" class="InductiveConstructor">[]</a><a id="859" class="Symbol">;</a> <a id="861" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">_∷_</a><a id="864" class="Symbol">;</a> <a id="866" href="Data.List.Base.html#4746" class="Function">length</a><a id="872" class="Symbol">;</a> <a id="874" href="Data.List.Base.html#1612" class="Function">map</a><a id="877" class="Symbol">)</a>
<a id="879" class="Keyword">open</a> <a id="884" class="Keyword">import</a> <a id="891" href="Data.List.Relation.Unary.Any.html" class="Module">Data.List.Relation.Unary.Any</a> <a id="920" class="Symbol">as</a> <a id="923" class="Module">ListAny</a> <a id="931" class="Keyword">using</a> <a id="937" class="Symbol">(</a><a id="938" href="Data.List.Relation.Unary.Any.html#1148" class="Datatype">Any</a><a id="941" class="Symbol">;</a> <a id="943" href="Data.List.Relation.Unary.Any.html#2684" class="Function">any?</a><a id="947" class="Symbol">;</a> <a id="949" href="Data.List.Relation.Unary.Any.html#1211" class="InductiveConstructor">here</a><a id="953" class="Symbol">;</a> <a id="955" href="Data.List.Relation.Unary.Any.html#1264" class="InductiveConstructor">there</a><a id="960" class="Symbol">)</a>
<a id="962" class="Keyword">open</a> <a id="967" class="Keyword">import</a> <a id="974" href="Data.List.Membership.Propositional.html" class="Module">Data.List.Membership.Propositional</a> <a id="1009" class="Keyword">using</a> <a id="1015" class="Symbol">(</a><a id="1016" href="Data.List.Membership.Setoid.html#925" class="Function Operator">_∈_</a><a id="1019" class="Symbol">)</a>

<a id="1022" class="Keyword">open</a> <a id="1027" class="Keyword">import</a> <a id="1034" href="Effect.Monad.html" class="Module">Effect.Monad</a> <a id="1047" class="Keyword">using</a> <a id="1053" class="Symbol">(</a><a id="1054" href="Effect.Monad.html#899" class="Record">RawMonad</a><a id="1062" class="Symbol">)</a>

<a id="1065" class="Keyword">open</a> <a id="1070" class="Keyword">import</a> <a id="1077" href="Data.Tick.html" class="Module">Data.Tick</a> <a id="1087" class="Keyword">using</a> <a id="1093" class="Symbol">(</a><a id="1094" href="Data.Tick.html#562" class="Record">Tick</a><a id="1098" class="Symbol">;</a> <a id="1100" href="Data.Tick.html#1408" class="Function">evalTick</a><a id="1108" class="Symbol">;</a> <a id="1110" href="Data.Tick.html#681" class="Function Operator">✓_</a><a id="1112" class="Symbol">;</a> <a id="1114" href="Data.Tick.html#1155" class="Function">monad</a><a id="1119" class="Symbol">)</a>
<a id="1121" class="Keyword">open</a> <a id="1126" class="Keyword">import</a> <a id="1133" href="Data.IsNonEmpty.html" class="Module">Data.IsNonEmpty</a>

<a id="1150" class="Keyword">open</a> <a id="1155" class="Keyword">import</a> <a id="1162" href="Syntax.Type.html" class="Module">Syntax.Type</a>
<a id="1174" class="Keyword">open</a> <a id="1179" class="Keyword">import</a> <a id="1186" href="Syntax.Term.html" class="Module">Syntax.Term</a>

<a id="1199" class="Keyword">open</a> <a id="1204" class="Keyword">import</a> <a id="1211" href="Contract.Common.html" class="Module">Contract.Common</a> <a id="1227" href="SpaceEfficient.Properties.NonEmpty.html#392" class="Bound">Label</a>
<a id="1233" class="Keyword">open</a> <a id="1238" class="Keyword">import</a> <a id="1245" href="Contract.Base.html" class="Module">Contract.Base</a> <a id="1259" href="SpaceEfficient.Properties.NonEmpty.html#392" class="Bound">Label</a> <a id="1265" href="SpaceEfficient.Properties.NonEmpty.html#408" class="Bound">𝒜</a>
<a id="1267" class="Keyword">open</a> <a id="1272" href="SpaceEfficient.Base.html" class="Module">SpaceEfficient.Base</a> <a id="1292" href="SpaceEfficient.Properties.NonEmpty.html#392" class="Bound">Label</a> <a id="1298" href="SpaceEfficient.Properties.NonEmpty.html#408" class="Bound">𝒜</a>
<a id="1300" class="Keyword">open</a> <a id="1305" href="Annotation.Language.html#838" class="Module">AnnTerm</a> <a id="1313" href="SpaceEfficient.Properties.NonEmpty.html#408" class="Bound">𝒜</a> <a id="1315" class="Keyword">hiding</a> <a id="1322" class="Symbol">(</a><a id="1323" href="Annotation.Language.html#1003" class="Field">State</a><a id="1328" class="Symbol">)</a>

<a id="1331" class="Keyword">open</a> <a id="1336" href="SpaceEfficient.Base.html#4354" class="Module">SECtcTransitSteps</a> <a id="1354" href="SpaceEfficient.Properties.NonEmpty.html#424" class="Bound">𝒜cctc-view</a> <a id="1365" href="SpaceEfficient.Properties.NonEmpty.html#473" class="Bound">stronger?</a>

<a id="nelist-join-flats"></a><a id="1376" href="SpaceEfficient.Properties.NonEmpty.html#1376" class="Function">nelist-join-flats</a> <a id="1394" class="Symbol">:</a> <a id="1396" class="Symbol">∀</a> <a id="1398" class="Symbol">{</a><a id="1399" href="SpaceEfficient.Properties.NonEmpty.html#1399" class="Bound">Δ</a><a id="1400" class="Symbol">}</a> <a id="1402" href="SpaceEfficient.Properties.NonEmpty.html#1402" class="Bound">preds</a> <a id="1408" class="Symbol">{</a><a id="1409" href="SpaceEfficient.Properties.NonEmpty.html#1409" class="Bound">preds′</a><a id="1415" class="Symbol">}</a> <a id="1417" class="Symbol">→</a>
  <a id="1421" href="Data.IsNonEmpty.html#280" class="Datatype">IsNonEmpty</a> <a id="1432" class="Symbol">(</a><a id="1433" href="Data.List.Base.html#1612" class="Function">map</a> <a id="1437" href="Contract.Base.html#3992" class="Function">flat-pred</a> <a id="1447" href="SpaceEfficient.Properties.NonEmpty.html#1402" class="Bound">preds</a><a id="1452" class="Symbol">)</a> <a id="1454" class="Symbol">→</a>
  <a id="1458" href="Data.IsNonEmpty.html#280" class="Datatype">IsNonEmpty</a> <a id="1469" class="Symbol">(</a><a id="1470" href="Data.List.Base.html#1612" class="Function">map</a> <a id="1474" href="Contract.Base.html#3992" class="Function">flat-pred</a> <a id="1484" href="SpaceEfficient.Properties.NonEmpty.html#1409" class="Bound">preds′</a><a id="1490" class="Symbol">)</a> <a id="1492" class="Symbol">→</a>
  <a id="1496" href="Data.IsNonEmpty.html#280" class="Datatype">IsNonEmpty</a> <a id="1507" class="Symbol">(</a><a id="1508" href="Data.List.Base.html#1612" class="Function">map</a> <a id="1512" href="Contract.Base.html#3992" class="Function">flat-pred</a> <a id="1522" class="Symbol">(</a><a id="1523" href="Data.Tick.html#1408" class="Function">evalTick</a> <a id="1532" class="Symbol">(</a><a id="1533" href="Data.Tick.html#681" class="Function Operator">✓</a> <a id="1535" href="SpaceEfficient.Base.html#5702" class="Function">join-flats</a> <a id="1546" class="Symbol">{</a><a id="1547" href="SpaceEfficient.Properties.NonEmpty.html#1399" class="Bound">Δ</a><a id="1548" class="Symbol">}</a> <a id="1550" href="SpaceEfficient.Properties.NonEmpty.html#1402" class="Bound">preds</a> <a id="1556" href="SpaceEfficient.Properties.NonEmpty.html#1409" class="Bound">preds′</a><a id="1562" class="Symbol">)))</a>
<a id="1566" href="SpaceEfficient.Properties.NonEmpty.html#1376" class="Function">nelist-join-flats</a> <a id="1584" class="Symbol">(</a><a id="1585" href="Contract.Base.html#1244" class="InductiveConstructor">flat</a> <a id="1590" href="SpaceEfficient.Properties.NonEmpty.html#1590" class="Bound">l</a> <a id="1592" href="SpaceEfficient.Properties.NonEmpty.html#1592" class="Bound">e</a> <a id="1594" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1596" href="SpaceEfficient.Properties.NonEmpty.html#1596" class="Bound">preds</a><a id="1601" class="Symbol">)</a> <a id="1603" class="Symbol">{</a><a id="1604" href="SpaceEfficient.Properties.NonEmpty.html#1604" class="Bound">preds′</a><a id="1610" class="Symbol">}</a> <a id="1612" class="Symbol">(</a><a id="1613" href="SpaceEfficient.Properties.NonEmpty.html#1592" class="Bound">e</a> <a id="1615" href="Data.IsNonEmpty.html#328" class="InductiveConstructor Operator">∷⁺</a> <a id="1618" href="SpaceEfficient.Properties.NonEmpty.html#1618" class="Bound">nepreds</a><a id="1625" class="Symbol">)</a> <a id="1627" href="SpaceEfficient.Properties.NonEmpty.html#1627" class="Bound">nepreds′</a> <a id="1636" class="Symbol">=</a>
  <a id="1640" class="Comment">-- nepreds  ≡ map flat-pred preds</a>
  <a id="1676" class="Comment">-- nepreds′ ≡ map flat-pred preds′</a>
  <a id="1713" href="SpaceEfficient.Properties.NonEmpty.html#1592" class="Bound">e</a> <a id="1715" href="Data.IsNonEmpty.html#328" class="InductiveConstructor Operator">∷⁺</a> <a id="1718" href="Data.List.Base.html#1612" class="Function">map</a> <a id="1722" href="Contract.Base.html#3992" class="Function">flat-pred</a> <a id="1732" class="Symbol">(</a><a id="1733" href="Data.Tick.html#1408" class="Function">evalTick</a> <a id="1742" class="Symbol">(</a><a id="1743" href="Data.Tick.html#681" class="Function Operator">✓</a>  <a id="1746" class="Keyword">do</a> <a id="1749" href="SpaceEfficient.Properties.NonEmpty.html#1749" class="Bound">mergedPreds</a>    <a id="1764" href="Effect.Monad.html#1053" class="Function Operator">←</a> <a id="1766" href="Data.Tick.html#681" class="Function Operator">✓</a> <a id="1768" href="SpaceEfficient.Base.html#5702" class="Function">join-flats</a> <a id="1779" href="SpaceEfficient.Properties.NonEmpty.html#1596" class="Bound">preds</a> <a id="1785" href="SpaceEfficient.Properties.NonEmpty.html#1604" class="Bound">preds′</a>
                                      <a id="1830" href="SpaceEfficient.Properties.NonEmpty.html#1830" class="Bound">collapsedPreds</a> <a id="1845" href="Effect.Monad.html#1053" class="Function Operator">←</a> <a id="1847" href="Data.Tick.html#681" class="Function Operator">✓</a> <a id="1849" href="SpaceEfficient.Base.html#5349" class="Function">drop</a> <a id="1854" href="SpaceEfficient.Properties.NonEmpty.html#1749" class="Bound">mergedPreds</a> <a id="1866" href="SpaceEfficient.Properties.NonEmpty.html#1592" class="Bound">e</a>
                                      <a id="1906" href="Data.Tick.html#681" class="Function Operator">✓</a> <a id="1908" href="Effect.Applicative.html#1520" class="Function">return</a> <a id="1915" href="SpaceEfficient.Properties.NonEmpty.html#1830" class="Bound">collapsedPreds</a><a id="1929" class="Symbol">))</a>
  <a id="1934" class="Keyword">where</a> <a id="1940" class="Keyword">open</a> <a id="1945" href="Effect.Monad.html#899" class="Module">RawMonad</a> <a id="1954" class="Symbol">{</a><a id="1955" class="Argument">f</a> <a id="1957" class="Symbol">=</a> <a id="1959" href="Level.html#521" class="Function">0ℓ</a><a id="1961" class="Symbol">}</a> <a id="1963" href="Data.Tick.html#1155" class="Function">monad</a>
</pre></body></html>